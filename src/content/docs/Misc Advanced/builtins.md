---
title: Builtins
description: Builtins
sidebar:
    order: 226
---
The compiler offers builtin constants and functions. Some are only available on certain targets. All builtins use the `$$`
name prefix.

## Builtin constants

These constants are generated by the compiler and can safely be used on any target platform that supports C3.

The behavior of these generally depends on the context in which they are used, which is why they are not the same as normal compile time constants and are helpfully visually distinguished from them by `$$`. They look like normal constants and can be used in the same places as compile time constants, but the compiler fills them out as special cases. 

For example, `$$LINE` may be used as a constant (e.g. as a fixed array size) but in reality changes its value in compile time on every line. Normal constants can't do that. All of the builtins are in some sense like that, to a greater or lesser extent.

As such, be alert for contextual nuances when using these. For instance, `#`-prefixed expression parameters to macros will use the macro's context if passed a builtin, not the call site's context. In the case of `$$LINE` this may result in seemingly incorrect line numbers. Be alert for such subtleties.

#### `$$BENCHMARK_NAMES`
An array of names of the benchmark functions as a `String[]`.

The program must be run in benchmark mode (e.g. via the `c3c benchmark` shell command) for this array to be non-empty.

#### `$$BENCHMARK_FNS`
An array of addresses to the benchmark functions as a `void*[]`.

The program must be run in benchmark mode (e.g. via the `c3c benchmark` command) for this array to be non-empty.

#### `$$DATE`
The current date (year, month, day) as a `String`.

In contrast, to retreive the time of day (hours, minutes, seconds) try using `$$TIME`.

#### `$$FILE`
The current source code file name (not including any of the path) as a `String`.

#### `$$FILEPATH`
The full ("absolute") path to the current source code file as a `String`.

#### `$$FUNC`
The current function name, will return "<GLOBAL>" on the global level.

#### `$$FUNCTION`
The current function as an expression.

#### `$$LINE`
The current line as an integer.

#### `$$LINE_RAW`
Usually the same as `$$LINE`, but in case of a macro inclusion it returns the line in the macro rather than
the line where the macro was included.

#### `$$MODULE`
The current module name.

#### `$$TIME`
The current time.


## Compiler builtin functions

The `$$` namespace defines *compiler builtin functions*. 
These special functions are __not guaranteed__ to exist on 
all platforms, and are ways to wrap compiler implemented, optimized implementations
of some particular functionality. They are mainly intended for standard 
library *internal* use. The standard library have macros 
that wrap these builtins, so they should normally not be used on their own. 

#### `$$trap`

Emits a trap instruction. 

#### `$$unreachable`

Inserts an "unreachable" annotation.

#### `$$stacktrace`

Returns the current "callstack" reference if available. OS and compiler dependent.

#### `$$volatile_store`

Takes a variable and a value and stores the value as a volatile store.

#### `$$volatile_load`

Takes a variable and returns the value using a volatile load.

#### `$$memcpy`

Builtin memcpy instruction.

#### `$$memset`

Builtin memset instruction.

#### `$$prefetch`

Prefetch a memory location.

#### `$$sysclock`

Access to the cycle counter register (or similar low latency clock) on supported
architectures (e.g. RDTSC on x86), otherwise `$$sysclock` will yield 0.

#### `$$syscall`

Makes a syscall according to the platform convention on platforms where it is supported.

### Math functions

Functions `$$ceil`, `$$trunc`, `$$sin`, `$$cos`, `$$log`, `$$log2`, `$$log10`, `$$rint`, `$$round`
`$$sqrt`, `$$roundeven`, `$$floor`, `$$sqrt`, `$$pow`, `$$exp`, `$$fma` and `$$fabs`, `$$copysign`,
`$$round`, `$$nearbyint`.

Can be applied to float vectors or numbers. Returns the same type.

Functions `$$min`, `$$abs` and `$$max` can be applied to any integer or float number or vector.

Function $pow_int takes a float or floating vector + an integer and returns
the same type as the first parameter.

Saturated addition, subtraction and left shift for integers and integer vectors:
`$$sat_add`, `$$sat_shl`, `$$sat_sub`.

### Bit functions

#### `$$fshl` and `$$fshr`

Funnel shift left and right, takes either two integers or two integer vectors.

#### `$$ctz`, `$$clz`, `$$bitreverse`, `$$bswap`, `$$popcount`

Bit functions work on an integer or an integer vector.

### Vector functions

`$$reduce_add`, `$$reduce_mul`, `$$reduce_and`, `$$reduce_or`, `$$reduce_xor` work on integer vectors.

`$$reduce_fadd`, `$$reduce_fmul` works on float vectors.

`$$reduce_max`, `$$reduce_min` works on any vector.

`$$reverse` reverses the values in any vector.

`$$shufflevector` rearranges the values of two vectors using a fixed mask into
a resulting vector.

